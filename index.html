<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sri Ganesh Engineering College ‚Äî pondy</title>
<style>
  :root{
    --bg:#f6fbff;
    --card:#ffffff;
    --accent1:#ff7a18; /* orange */
    --accent2:#06b6d4; /* teal */
    --accent3:#0f172a; /* dark */
    --muted:#64748b;
  }
  *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;}
  body{
    margin:0;
    min-height:100vh;
    background: linear-gradient(180deg,#e6f7ff 0%, #fefefe 100%);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:20px;
  }

  /* Container */
  .app {
    width:100%;
    max-width:1100px;
    background:var(--card);
    border-radius:14px;
    box-shadow:0 20px 50px rgba(2,6,23,0.12);
    overflow:hidden;
    display:grid;
    grid-template-columns: 320px 1fr;
    min-height:640px;
  }

  /* Sidebar (login or menu) */
  .sidebar {
    background: linear-gradient(180deg,#ffffff,#f8feff);
    padding:28px;
    border-right:1px solid rgba(15,23,42,0.04);
    display:flex;
    flex-direction:column;
    gap:18px;
    align-items:center;
    justify-content:flex-start;
  }

  .logo {
    width:120px;height:120px;border-radius:12px;
    background:linear-gradient(135deg,var(--accent1),var(--accent2));
    display:flex;align-items:center;justify-content:center;color:white;
    font-weight:900;font-size:28px;box-shadow:0 8px 24px rgba(6,22,37,0.08);
  }
  .college-name { text-align:center; font-weight:900; color:var(--accent3); font-size:18px; }
  .college-sub { font-size:12px; color:var(--muted); font-weight:700; margin-top:6px; text-align:center;}

  nav { width:100%; margin-top:8px; }
  .menu-item {
    display:flex;align-items:center;gap:12px;padding:12px 14px;border-radius:10px;
    cursor:pointer;font-weight:800;color:var(--accent3);margin-bottom:8px;
  }
  .menu-item:hover{ background:#f1fbff; }
  .menu-item.active{ background:linear-gradient(90deg, rgba(6,182,212,0.10), rgba(255,122,24,0.06)); box-shadow:inset 0 0 0 1px rgba(6,182,212,0.04);}

  /* Header area on right */
  .main {
    padding:20px 28px;
  }
  .topbar {
    display:flex;align-items:center;justify-content:space-between;margin-bottom:18px;
  }
  .title { font-size:20px;font-weight:900;color:var(--accent3);display:flex;gap:12px;align-items:center; }
  .login-info { font-size:13px;color:var(--muted);font-weight:700; }
  .btn { padding:8px 12px;border-radius:8px;border:none;cursor:pointer;font-weight:800; }
  .btn-logout { background:transparent;border:2px solid rgba(15,23,42,0.06); }
  .btn-primary { background:linear-gradient(90deg,var(--accent2),var(--accent1)); color:white; box-shadow:0 8px 20px rgba(6,22,37,0.08); }

  /* Cards & lists */
  .card { background:#fff;padding:16px;border-radius:12px;border:1px solid rgba(15,23,42,0.04); box-shadow:0 6px 18px rgba(6,22,37,0.03); }
  .grid { display:grid; gap:12px; }

  /* Attendance table */
  table { width:100%; border-collapse:collapse; }
  th, td { text-align:left; padding:8px 10px; font-size:14px; color:var(--accent3); border-bottom:1px dashed rgba(15,23,42,0.04); }
  th { font-weight:900; font-size:13px; color:var(--muted); }
  .present { color:green; font-weight:800; }
  .absent { color:#ef4444; font-weight:800; }

  .controls { display:flex;gap:8px;align-items:center;flex-wrap:wrap; margin-bottom:12px; }

  /* form */
  label{ display:block; font-size:12px;color:var(--muted); font-weight:800; margin-bottom:6px; }
  input[type="text"], input[type="tel"], textarea, select {
    width:100%; padding:10px;border-radius:8px;border:1px solid rgba(15,23,42,0.06); font-weight:700;
  }
  .row { display:flex; gap:12px; }
  .col { flex:1; }

  /* login screen */
  .login-box { width:100%; max-width:320px; margin-top:8px; }
  .small { font-size:12px;color:var(--muted);font-weight:700; }

  /* responsive */
  @media (max-width:920px){
    .app { grid-template-columns:1fr; }
    .sidebar{ flex-direction:row; gap:10px; padding:12px; overflow:auto; align-items:center; justify-content:flex-start;}
    .logo{ width:64px;height:64px;font-size:18px }
    .college-name{display:none}
    .main{ padding:16px; }
  }
</style>
</head>
<body>
  <div class="app" id="app">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="logo" aria-hidden="true">SGCET</div>
      <div style="text-align:center">
        <div class="college-name">Sri Ganesh Engineering College</div>
        <div class="college-sub">unlikey boy</div>
      </div>

      <!-- Login form (visible until logged in) -->
      <div id="loginPanel" class="login-box" style="margin-top:18px;">
        <div class="card">
          <div style="font-weight:900;color:var(--accent3);font-size:16px;margin-bottom:8px;">Login</div>
          <label>Username</label>
          <input id="loginUser" type="text" placeholder="Enter username" value="">
          <label style="margin-top:8px">Password</label>
          <input id="loginPass" type="password" placeholder="Enter password" value="">
          <div style="margin-top:10px; display:flex; gap:8px;">
            <button id="btnLogin" class="btn btn-primary" style="flex:1">Sign in</button>
          </div>
          <div style="margin-top:8px" class="small">Username: <strong></strong> ‚Ä¢ Password: <strong></strong></div>
        </div>
      </div>

      <!-- Menu (hidden until logged in) -->
      <nav id="menu" style="display:none; width:100%; margin-top:12px;">
        <div class="menu-item active" data-page="home">üè† Home</div>
        <div class="menu-item" data-page="attendance">üìù Attendance</div>
        <div class="menu-item" data-page="students">üë©‚Äçüéì Student Details</div>
        <div class="menu-item" data-page="sir">üë®‚Äçüè´ Sir Details</div>
      </nav>

      <div style="margin-top:auto; width:100%; text-align:center;">
        <small style="color:var(--muted); font-weight:800">unlikey boy</small>
      </div>
    </aside>

    <!-- Main area -->
    <main class="main">
      <div class="topbar">
        <div class="title">Sri Ganesh Engineering College <span style="font-size:12px;color:var(--muted);font-weight:700">‚Ä¢ </span></div>
        <div style="display:flex;gap:12px;align-items:center;">
          <div id="loginInfo" class="login-info" style="display:none">Signed in as <strong>aids</strong></div>
          <button id="btnLogout" class="btn btn-logout" style="display:none">Logout</button>
        </div>
      </div>

      <div id="contentArea">
        <!-- Default Home / Welcome -->
        <div id="page-home" class="page card">
          <h2 style="margin-top:0">Welcome</h2>
          <p style="color:var(--muted);font-weight:800">aids</p>

          <div style="margin-top:12px" class="grid">
            <div class="card">
              <div style="display:flex;justify-content:space-between;align-items:center">
                <div>
                  <div style="font-size:14px;color:var(--muted);font-weight:800">Total Students (registered)</div>
                  <div id="totalRegistered" style="font-size:20px;font-weight:900;color:var(--accent3)">31</div>
                </div>
                <div>
                  <div style="font-size:14px;color:var(--muted);font-weight:800">Today Present</div>
                  <div id="todayPresent" style="font-size:20px;font-weight:900;color:green">0</div>
                </div>
              </div>
            </div>

            <div class="card" style="display:flex;gap:12px;align-items:center">
              <div style="flex:1">
                <div style="font-weight:900;color:var(--accent3)">Quick Actions</div>
                <div style="color:var(--muted);font-weight:800;margin-top:6px">You can reset today's attendance or export student list.</div>
              </div>
              <div style="display:flex;gap:8px">
                <button id="resetAttendance" class="btn">Reset Attendance</button>
                <button id="exportStudents" class="btn btn-primary">Export CSV</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Attendance page -->
        <div id="page-attendance" class="page" style="display:none">
          <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
              <h3 style="margin:0">Attendance ‚Äî Group: aids</h3>
              <div style="font-weight:800;color:var(--muted)">Date: <span id="attDate"></span></div>
            </div>

            <div class="controls">
              <label><input type="checkbox" id="toggleAll"> Mark all present</label>
              <button id="saveAttendance" class="btn btn-primary">Save Today</button>
              <div style="margin-left:auto;font-weight:900">Present: <span id="countPresent">0</span> ‚Ä¢ Absent: <span id="countAbsent">31</span></div>
            </div>

            <div style="overflow:auto; max-height:420px">
              <table id="attendanceTable" class="card">
                <thead>
                  <tr><th>#</th><th>Name</th><th>Group</th><th>Status</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Students page -->
        <div id="page-students" class="page" style="display:none">
          <div class="card">
            <h3 style="margin-top:0">Student Details</h3>

            <div style="display:flex;gap:12px;margin-bottom:12px;align-items:flex-end">
              <div style="flex:1">
                <label>Name</label>
                <input id="stuName" type="text" placeholder="Full name">
              </div>
              <div style="width:120px">
                <label>Group</label>
                <select id="stuGroup"><option value="aids">aids</option></select>
              </div>
              <div style="width:180px">
                <label>Phone</label>
                <input id="stuPhone" type="tel" placeholder="+91">
              </div>
              <div style="width:200px">
                <label>&nbsp;</label>
                <button id="addStudent" class="btn btn-primary" style="width:100%">Add / Save</button>
              </div>
            </div>

            <label>Address</label>
            <textarea id="stuAddress" rows="2" placeholder="Address"></textarea>

            <div style="margin-top:12px; overflow:auto; max-height:360px">
              <table id="studentsTable" class="card">
                <thead><tr><th>#</th><th>Name</th><th>Group</th><th>Phone</th><th>Address</th><th>Action</th></tr></thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Sir details page -->
        <div id="page-sir" class="page" style="display:none">
          <div class="card">
            <h3 style="margin-top:0">Class Sir Details</h3>

            <div style="display:flex;gap:12px;align-items:flex-end;margin-bottom:12px">
              <div style="flex:1">
                <label>Name</label>
                <input id="sirName" type="text" placeholder="Sir name">
              </div>
              <div style="width:200px">
                <label>Phone</label>
                <input id="sirPhone" type="tel" placeholder="+91">
              </div>
              <div style="width:160px">
                <label>&nbsp;</label>
                <button id="saveSir" class="btn btn-primary" style="width:100%">Save</button>
              </div>
            </div>

            <div style="margin-top:8px">
              <div id="sirList" class="card">
                <!-- populated dynamically -->
              </div>
            </div>
          </div>
        </div>

      </div>
    </main>
  </div>

<script>
/* -------------------------
  Demo data + state handling
   - Login: username 'aids', password '2025'
   - 31 students preloaded (group 'aids')
   - Student & sir details stored in localStorage
--------------------------*/
const DEMO_USER = {user:'aids', pass:'2025'};
const STORAGE_KEYS = { students: 'demo_students_v1', sir: 'demo_sir_v1', attendance: 'demo_attendance_v1' };

/* sample 31 students */
const SAMPLE_NAMES = [
 "sham", "Balu K", "vijay P", "dharani dharan d", "Esha M", "Faiz A", "Gopal V", "Harini T",
 "Ishan R", "Jaya L", "Karan N", "Lakshmi D", "Manoj R", "Nisha S", "Omkar P", "Pooja K",
 "Qasim H", "Ramesh T", "Sowmya V", "Tanuja P", "Uday K", "Varun S", "Wahid A", "Xavier L",
 "Yash P", "Zoya M", "Arjun K", "Bhanu S", "Chitra R", "Dinesh P", "Eshwar M"
];

function loadStudents() {
  const raw = localStorage.getItem(STORAGE_KEYS.students);
  if (raw) return JSON.parse(raw);
  // create initial sample list (31)
  const list = SAMPLE_NAMES.map((n,i) => ({
    id: 'S' + String(i+1).padStart(3,'0'),
    name: n,
    group: 'aids',
    phone: '',
    address: ''
  }));
  localStorage.setItem(STORAGE_KEYS.students, JSON.stringify(list));
  return list;
}

function saveStudents(list) {
  localStorage.setItem(STORAGE_KEYS.students, JSON.stringify(list));
}

function loadSir() {
  const raw = localStorage.getItem(STORAGE_KEYS.sir);
  if (raw) return JSON.parse(raw);
  // default sir
  const defaultSir = [{ id:'T1', name:'Prof. R. Kannan', phone:'+91 98765 43210' }];
  localStorage.setItem(STORAGE_KEYS.sir, JSON.stringify(defaultSir));
  return defaultSir;
}
function saveSir(list){ localStorage.setItem(STORAGE_KEYS.sir, JSON.stringify(list)); }

function loadAttendance() {
  const raw = localStorage.getItem(STORAGE_KEYS.attendance);
  if (raw) return JSON.parse(raw);
  return {}; // keyed by date: { '2025-09-14': {S001: true, S002: false, ...} }
}
function saveAttendance(obj){ localStorage.setItem(STORAGE_KEYS.attendance, JSON.stringify(obj)); }

/* App init */
let students = loadStudents();
let sirList = loadSir();
let attendanceStore = loadAttendance();

const pages = {
  home: document.getElementById('page-home'),
  attendance: document.getElementById('page-attendance'),
  students: document.getElementById('page-students'),
  sir: document.getElementById('page-sir')
};

const menu = document.querySelectorAll('.menu-item');
menu.forEach(el => el.addEventListener('click', () => {
  if (!isLoggedIn()) return;
  menu.forEach(m => m.classList.remove('active'));
  el.classList.add('active');
  showPage(el.dataset.page);
}));

function showPage(page) {
  Object.values(pages).forEach(p => p.style.display = 'none');
  pages[page].style.display = '';
  if (page === 'attendance') renderAttendance();
  if (page === 'students') renderStudents();
  if (page === 'sir') renderSir();
}

/* Login */
const loginPanel = document.getElementById('loginPanel');
const menuPanel = document.getElementById('menu');
const loginInfo = document.getElementById('loginInfo');
const btnLogout = document.getElementById('btnLogout');

document.getElementById('btnFill').addEventListener('click', () => {
  document.getElementById('loginUser').value = DEMO_USER.user;
  document.getElementById('loginPass').value = DEMO_USER.pass;
});

document.getElementById('btnLogin').addEventListener('click', () => {
  const u = document.getElementById('loginUser').value.trim();
  const p = document.getElementById('loginPass').value;
  if (u === DEMO_USER.user && p === DEMO_USER.pass) {
    localStorage.setItem('demo_logged_in', '1');
    onLogin();
  } else {
    alert('Invalid password');
  }
});

btnLogout.addEventListener('click', () => {
  localStorage.removeItem('demo_logged_in');
  onLogout();
});

function isLoggedIn() { return localStorage.getItem('demo_logged_in') === '1'; }

function onLogin(){
  loginPanel.style.display = 'none';
  menuPanel.style.display = '';
  loginInfo.style.display = '';
  btnLogout.style.display = '';
  document.getElementById('loginInfo').textContent = 'Signed in as aids';
  showPage('home');
  updateCounts();
}

function onLogout(){
  loginPanel.style.display = '';
  menuPanel.style.display = 'none';
  loginInfo.style.display = 'none';
  btnLogout.style.display = 'none';
  showPage('home');
}

/* If already logged in on reload */
if (isLoggedIn()) onLogin();
else onLogout();

/* Home quick actions */
document.getElementById('resetAttendance').addEventListener('click', () => {
  if (!confirm('Reset all saved attendance data?')) return;
  attendanceStore = {};
  saveAttendance(attendanceStore);
  renderAttendance();
  updateCounts();
});
document.getElementById('exportStudents').addEventListener('click', () => {
  const csv = toCSV(students);
  const blob = new Blob([csv], {type: 'text/csv'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'students_demo.csv';
  a.click();
});

/* Students page logic */
document.getElementById('addStudent').addEventListener('click', () => {
  const name = document.getElementById('stuName').value.trim();
  const group = document.getElementById('stuGroup').value;
  const phone = document.getElementById('stuPhone').value.trim();
  const address = document.getElementById('stuAddress').value.trim();

  if (!name) { alert('Please enter student name'); return; }

  // new id
  const newId = 'S' + String(students.length + 1).padStart(3,'0');
  const rec = { id:newId, name, group, phone, address };
  students.push(rec);
  saveStudents(students);
  document.getElementById('stuName').value = '';
  document.getElementById('stuPhone').value = '';
  document.getElementById('stuAddress').value = '';
  renderStudents();
  updateCounts();
});

function renderStudents() {
  const tbody = document.querySelector('#studentsTable tbody');
  tbody.innerHTML = '';
  students.forEach((s, idx) => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${idx+1}</td>
      <td>${escapeHtml(s.name)}</td>
      <td>${escapeHtml(s.group)}</td>
      <td>${escapeHtml(s.phone)}</td>
      <td>${escapeHtml(s.address)}</td>
      <td>
        <button data-id="${s.id}" class="btn btn-logout btn-edit">Edit</button>
        <button data-id="${s.id}" class="btn btn-logout btn-delete">Delete</button>
      </td>
    `;
    tbody.appendChild(tr);
  });
  // attach handlers
  document.querySelectorAll('.btn-delete').forEach(b=>{
    b.addEventListener('click', e => {
      const id = e.currentTarget.dataset.id;
      if (!confirm('Delete student '+id+'?')) return;
      students = students.filter(x => x.id !== id);
      saveStudents(students);
      renderStudents();
      updateCounts();
    });
  });
  document.querySelectorAll('.btn-edit').forEach(b=>{
    b.addEventListener('click', e => {
      const id = e.currentTarget.dataset.id;
      const rec = students.find(x=>x.id===id);
      if (!rec) return;
      const newName = prompt('Edit name', rec.name);
      if (newName === null) return;
      rec.name = newName.trim() || rec.name;
      const newPhone = prompt('Edit phone', rec.phone);
      if (newPhone !== null) rec.phone = newPhone.trim();
      const newAddr = prompt('Edit address', rec.address);
      if (newAddr !== null) rec.address = newAddr.trim();
      saveStudents(students);
      renderStudents();
      updateCounts();
    });
  });
}

/* Sir details */
document.getElementById('saveSir').addEventListener('click', () => {
  const name = document.getElementById('sirName').value.trim();
  const phone = document.getElementById('sirPhone').value.trim();
  if (!name) { alert('Enter sir name'); return; }
  const newId = 'T' + String(sirList.length + 1);
  sirList.push({ id: newId, name, phone });
  saveSir(sirList);
  document.getElementById('sirName').value = '';
  document.getElementById('sirPhone').value = '';
  renderSir();
});

function renderSir() {
  const box = document.getElementById('sirList');
  box.innerHTML = '';
  sirList.forEach(s => {
    const div = document.createElement('div');
    div.style.display='flex';
    div.style.justifyContent='space-between';
    div.style.alignItems='center';
    div.style.padding='8px 6px';
    div.innerHTML = `<div><strong>${escapeHtml(s.name)}</strong><div style="font-size:12px;color:${'#64748b'}">${escapeHtml(s.phone)}</div></div>
      <div style="display:flex;gap:8px">
        <button data-id="${s.id}" class="btn btn-logout btn-sir-delete">Delete</button>
      </div>`;
    box.appendChild(div);
  });
  document.querySelectorAll('.btn-sir-delete').forEach(b=>{
    b.addEventListener('click', e=>{
      const id = e.currentTarget.dataset.id;
      if (!confirm('Delete record?')) return;
      sirList = sirList.filter(x=>x.id !== id);
      saveSir(sirList);
      renderSir();
    });
  });
}

/* Attendance logic */
function renderAttendance() {
  const tbody = document.querySelector('#attendanceTable tbody');
  tbody.innerHTML = '';
  const today = getISODate(new Date());
  document.getElementById('attDate').textContent = today;
  const todays = attendanceStore[today] || {};
  students.forEach((s, idx) => {
    const tr = document.createElement('tr');
    const checked = todays[s.id] ? 'checked' : '';
    tr.innerHTML = `
      <td>${idx+1}</td>
      <td>${escapeHtml(s.name)}</td>
      <td>${escapeHtml(s.group)}</td>
      <td>
        <label style="display:flex;gap:8px;align-items:center">
          <input type="checkbox" data-id="${s.id}" class="att-toggle" ${checked}>
          <span style="font-weight:800">${checked ? 'Present' : 'Absent'}</span>
        </label>
      </td>
    `;
    tbody.appendChild(tr);
  });

  // update counters
  updateAttendanceCounters();

  // bind toggles
  document.querySelectorAll('.att-toggle').forEach(cb=>{
    cb.addEventListener('change', () => {
      updateAttendanceCounters();
    });
  });

  // toggle all
  const toggleAll = document.getElementById('toggleAll');
  toggleAll.checked = false;
  toggleAll.onchange = () => {
    const all = document.querySelectorAll('.att-toggle');
    all.forEach(ch => ch.checked = toggleAll.checked);
    updateAttendanceCounters();
  };
}

document.getElementById('saveAttendance').addEventListener('click', () => {
  const today = getISODate(new Date());
  const elems = document.querySelectorAll('.att-toggle');
  const obj = {};
  elems.forEach(cb => {
    obj[cb.dataset.id] = cb.checked ? true : false;
  });
  attendanceStore[today] = obj;
  saveAttendance(attendanceStore);
  alert('Attendance saved for ' + today);
  updateCounts();
});

function updateAttendanceCounters(){
  const elems = document.querySelectorAll('.att-toggle');
  const total = elems.length;
  let present = 0;
  elems.forEach(cb => { if (cb.checked) present++; });
  const absent = total - present;
  document.getElementById('countPresent').textContent = present;
  document.getElementById('countAbsent').textContent = absent;
  document.getElementById('todayPresent').textContent = present;
}

/* Helpers */
function updateCounts(){
  document.getElementById('totalRegistered').textContent = students.length;
  // compute today's present if saved
  const today = getISODate(new Date());
  const todays = attendanceStore[today];
  if (todays) {
    let present = 0;
    for (const id in todays) if (todays[id]) present++;
    document.getElementById('todayPresent').textContent = present;
  } else {
    document.getElementById('todayPresent').textContent = '0';
  }
}

function getISODate(d){
  const yyyy = d.getFullYear();
  const mm = String(d.getMonth()+1).padStart(2,'0');
  const dd = String(d.getDate()).padStart(2,'0');
  return `${yyyy}-${mm}-${dd}`;
}

function toCSV(list){
  if (!list.length) return '';
  const keys = Object.keys(list[0]);
  const header = keys.join(',') + '\\n';
  const rows = list.map(r => keys.map(k => '"'+String((r[k]||'')).replace(/"/g,'""')+'"').join(',')).join('absent');
  return header + rows;
}

function escapeHtml(str){ return (str+'').replace(/[&<>"']/g, s=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' })[s]); }

/* initial render */
renderStudents();
renderSir();
renderAttendance();
updateCounts();

/* simple routing: show pages via menu */
function showMenuPage(name) {
  document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active'));
  const el = document.querySelector('.menu-item[data-page="'+name+'"]');
  if (el) el.classList.add('active');
  showPage(name);
}

/* wire sidebar menu show/hide depending login state */
if (isLoggedIn()) {
  document.getElementById('loginPanel').style.display='none';
  document.getElementById('menu').style.display='';
} else {
  document.getElementById('loginPanel').style.display='';
  document.getElementById('menu').style.display='none';
}

/* expose some functions to window (for quick nav if needed) */
window.demo = { showMenuPage };

</script>
</body>
</html>